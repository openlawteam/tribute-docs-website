"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4726],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return g}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),g=n,h=u["".concat(l,".").concat(g)]||u[g]||p[g]||s;return a?r.createElement(h,o(o({ref:t},d),{},{components:a})):r.createElement(h,o({ref:t},d))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,o=new Array(s);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4914:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var r=a(7462),n=a(3366),s=(a(7294),a(3905)),o=["components"],i={id:"signature-adapter",title:"Signatures"},l=void 0,c={unversionedId:"contracts/adapters/utils/signature-adapter",id:"contracts/adapters/utils/signature-adapter",isDocsHomePage:!1,title:"Signatures",description:"Signatures enable DAOs to sign arbitrary messages or typed data through the configured governance options. Smart contracts can not natively sign messages like an EOA can, so this adapter uses the ERC1271 standard for smart contract signatures.",source:"@site/docs/contracts/adapters/utils/Signatures.md",sourceDirName:"contracts/adapters/utils",slug:"/contracts/adapters/utils/signature-adapter",permalink:"/docs/contracts/adapters/utils/signature-adapter",editUrl:"https://github.com/openlawteam/tribute-contracts/edit/docs/website/docs/contracts/adapters/utils/Signatures.md",tags:[],version:"current",frontMatter:{id:"signature-adapter",title:"Signatures"},sidebar:"docs",previous:{title:"DAO Registry",permalink:"/docs/contracts/adapters/utils/dao-registry-adapter"},next:{title:"Tribute UI",permalink:"/docs/tutorial/dao/interacting"}},d=[{value:"Workflow",id:"workflow",children:[]},{value:"Access Flags",id:"access-flags",children:[{value:"DaoRegistry",id:"daoregistry",children:[]},{value:"ERC1271Extension",id:"erc1271extension",children:[]}]},{value:"Dependencies",id:"dependencies",children:[{value:"DaoRegistry",id:"daoregistry-1",children:[]},{value:"ERC1271Extension",id:"erc1271extension-1",children:[]},{value:"Voting",id:"voting",children:[]}]},{value:"Structs",id:"structs",children:[{value:"ProposalDetails",id:"proposaldetails",children:[]}]},{value:"Storage",id:"storage",children:[{value:"proposals",id:"proposals",children:[]}]},{value:"Functions",id:"functions",children:[{value:"receive",id:"receive",children:[]},{value:"submitProposal",id:"submitproposal",children:[]},{value:"processProposal",id:"processproposal",children:[]}]},{value:"Events",id:"events",children:[]}],p={toc:d};function u(e){var t=e.components,a=(0,n.Z)(e,o);return(0,s.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Signatures enable DAOs to sign arbitrary messages or typed data through the configured governance options. Smart contracts can not natively sign messages like an EOA can, so this adapter uses the ERC1271 standard for smart contract signatures."),(0,s.kt)("p",null,"The main goal is to enable DAOs to interact with applications that rely on signatures for authentication and order book management, among other use cases."),(0,s.kt)("h2",{id:"workflow"},"Workflow"),(0,s.kt)("p",null,"In order for the DAO to sign a message, a member must calculate the signature data externally then submit the permission hash, signature hash, and magic value to the DAO for a proposal."),(0,s.kt)("h2",{id:"access-flags"},"Access Flags"),(0,s.kt)("h3",{id:"daoregistry"},"DaoRegistry"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"SUBMIT_PROPOSAL"))),(0,s.kt)("h3",{id:"erc1271extension"},"ERC1271Extension"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"SIGN"))),(0,s.kt)("h2",{id:"dependencies"},"Dependencies"),(0,s.kt)("h3",{id:"daoregistry-1"},"DaoRegistry"),(0,s.kt)("h3",{id:"erc1271extension-1"},"ERC1271Extension"),(0,s.kt)("h3",{id:"voting"},"Voting"),(0,s.kt)("h2",{id:"structs"},"Structs"),(0,s.kt)("h3",{id:"proposaldetails"},"ProposalDetails"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"permissionHash"),": the hash of the data to be signed"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"signature"),": the hash fo the signature to be marked as valid if passed"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"magicValue"),": the value to return if the signature is valid")),(0,s.kt)("h2",{id:"storage"},"Storage"),(0,s.kt)("h3",{id:"proposals"},"proposals"),(0,s.kt)("p",null,"All signature proposals handled by each DAO."),(0,s.kt)("h2",{id:"functions"},"Functions"),(0,s.kt)("h3",{id:"receive"},"receive"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-solidity"},"    /**\n     * @notice default fallback function to prevent from sending ether to the contract.\n     */\n    receive() external payable\n")),(0,s.kt)("h3",{id:"submitproposal"},"submitProposal"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-solidity"},"    /**\n     * @notice Creates and sponsors a signature proposal.\n     * @dev Only members of the DAO can sponsor a signature proposal.\n     * @param dao The DAO Address.\n     * @param proposalId The proposal id.\n     * @param permissionHash The hash of the data to be signed\n     * @param signatureHash The hash of the signature to be marked as valid\n     * @param magicValue The value to return when a signature is valid\n     * @param data Additional details about the signature proposal.\n     */\n    function submitProposal(\n        DaoRegistry dao,\n        bytes32 proposalId,\n        bytes32 permissionHash,\n        bytes32 signatureHash,\n        bytes4 magicValue,\n        bytes memory data\n    ) external override reentrancyGuard(dao)\n")),(0,s.kt)("h3",{id:"processproposal"},"processProposal"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-solidity"},"    /**\n     * @notice Processing a signature proposal to mark the signature as valid\n     * @dev Only proposals that were not processed are accepted.\n     * @dev Only proposals that were sponsored are accepted.\n     * @dev Only proposals that passed can get processed\n     * @param dao The DAO Address.\n     * @param proposalId The proposal id.\n     */\n    function processProposal(DaoRegistry dao, bytes32 proposalId)\n        external\n        override\n        reentrancyGuard(dao)\n")),(0,s.kt)("h2",{id:"events"},"Events"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"No events are emitted.")))}u.isMDXComponent=!0}}]);