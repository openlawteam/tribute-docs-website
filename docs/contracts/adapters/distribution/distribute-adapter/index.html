<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="TributeDAO Framework" href="/opensearch.xml"><title data-react-helmet="true">Distribute | TributeDAO Framework</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tributedao.com/docs/contracts/adapters/distribution/distribute-adapter"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Distribute | TributeDAO Framework"><meta data-react-helmet="true" name="description" content="The Distribute Adapter provides features in which the DAO members can receive funds from the DAO for any given reason. A good example of that is when the members collectively agree to payout dividends to one or all member of the DAO, when that happens they can submit a proposal for voting, and if the proposal pass the amount is distributed equally to the members."><meta data-react-helmet="true" property="og:description" content="The Distribute Adapter provides features in which the DAO members can receive funds from the DAO for any given reason. A good example of that is when the members collectively agree to payout dividends to one or all member of the DAO, when that happens they can submit a proposal for voting, and if the proposal pass the amount is distributed equally to the members."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tributedao.com/docs/contracts/adapters/distribution/distribute-adapter"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/adapters/distribution/distribute-adapter" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/adapters/distribution/distribute-adapter" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://JM91LTL6DB-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.164b277f.css">
<link rel="preload" href="/assets/js/runtime~main.934fcd05.js" as="script">
<link rel="preload" href="/assets/js/main.82287f4f.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">TRIBUTE</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/overview-and-benefits">Get Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/core/introduction">Core</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/extensions/introduction">Extensions</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/adapters/introduction">Adapters</a><a class="navbar__item navbar__link" href="/docs/thanks">Thank You</a><a href="https://discord.gg/tEfP68xnTd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Tribute Discord"></a><a href="https://github.com/search?q=org%3Aopenlawteam+tribute-ui+OR+tribute-contracts+in%3Aname&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Tribute GitHub"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/overview-and-benefits">Overview &amp; Benefits</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Comparison</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Design Principles</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/core/dao-registry">Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/core/dao-factory">Factory</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extension</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Adapter</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Distribution</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/contracts/adapters/distribution/distribute-adapter">Distribute</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Funding</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Kick</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Onboarding</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Voting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Utils</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/tutorial/dao/interacting">Tribute UI</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Subgraph</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Distribute</h1></header><p>The Distribute Adapter provides features in which the DAO members can receive funds from the DAO for any given reason. A good example of that is when the members collectively agree to payout dividends to one or all member of the DAO, when that happens they can submit a proposal for voting, and if the proposal pass the amount is distributed equally to the members.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="workflow"></a>Workflow<a class="hash-link" href="#workflow" title="Direct link to heading">#</a></h2><p>The token distribution starts when a member submits a proposal to distribute a certain amount of a token for one or all members of the DAO. It is important to mention that the distribution can only happen for 1 member or for all, there is no way to distribute the tokens for a subset of the DAO members.</p><p>Once the distribution proposal gets created, it is open for voting, and sponsored by the message sender. The adapter tracks all the distributions that have been executed already by each DAO, and also tracks the current distributions that is in progress - this is done to ensure the distributions are executed sequentially per DAO.</p><p>Once the distribution proposal has passed, the other members have to start the actual distribution process (function <code>processProposal</code>). In this process the member indicated in the proposal or each member of the DAO will receive, based on the current number of holding units, a token amount in the internal bank account, so it can be withdraw later on. This process does not changes the number of units of the members, it just uses it to calculate the fair amount to distribute for each member. After that, the distribution proposal gets updated to <code>Completed</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The member needs to have at least 1 unit to be able to receive funds from a distribution proposal.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="access-flags"></a>Access Flags<a class="hash-link" href="#access-flags" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="daoregistry"></a>DAORegistry<a class="hash-link" href="#daoregistry" title="Direct link to heading">#</a></h3><ul><li><code>SUBMIT_PROPOSAL</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bankextension"></a>BankExtension<a class="hash-link" href="#bankextension" title="Direct link to heading">#</a></h3><ul><li><code>INTERNAL_TRANSFER</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dependencies"></a>Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="daoregistry-1"></a>DaoRegistry<a class="hash-link" href="#daoregistry-1" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bank"></a>Bank<a class="hash-link" href="#bank" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="voting"></a>Voting<a class="hash-link" href="#voting" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="fairsharehelper"></a>FairShareHelper<a class="hash-link" href="#fairsharehelper" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="structs"></a>Structs<a class="hash-link" href="#structs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distribution"></a>Distribution<a class="hash-link" href="#distribution" title="Direct link to heading">#</a></h3><ul><li><code>token</code>: The distribution token in which the members should receive the funds. Must be supported by the DAO.</li><li><code>amount</code>: The amount to distribute.</li><li><code>status</code>: The distribution status.</li><li><code>unitHolderAddr</code>: The member address that should receive the funds, if 0x0, the funds will be distributed to all members of the DAO.</li><li><code>currentIndex</code>: Current iteration index to control the cached for-loop.</li><li><code>blockNumber</code>: The block number in which the proposal has been created.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distributionstatus"></a>DistributionStatus<a class="hash-link" href="#distributionstatus" title="Direct link to heading">#</a></h3><ul><li><code>status</code>: The distribution status (<code>Not Started</code>, <code>In Progress</code>, <code>Done</code>).</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distributions"></a>distributions<a class="hash-link" href="#distributions" title="Direct link to heading">#</a></h3><p>Keeps track of all the distributions executed per DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ongoingdistributions"></a>ongoingDistributions<a class="hash-link" href="#ongoingdistributions" title="Direct link to heading">#</a></h3><p>Keeps track of the latest ongoing distribution proposal per DAO to ensure only 1 proposal can be processed at a time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="receive"></a>receive<a class="hash-link" href="#receive" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice default fallback function to prevent from sending ether to the contract.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    receive() external payable</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="submitproposal"></a>submitProposal<a class="hash-link" href="#submitproposal" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Creates a distribution proposal for one or all members of the DAO, opens it for voting, and sponsors it.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only tokens that are allowed by the Bank are accepted.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev If the unitHolderAddr is 0x0, then the funds will be distributed to all members of the DAO.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Proposal ids can not be reused.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev The amount must be greater than zero.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dao The dao address.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param proposalId The distribution proposal id.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param unitHolderAddr The member address that should receive the funds, if 0x0, the funds will be distributed to all members of the DAO.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param token The distribution token in which the members should receive the funds. Must be supported by the DAO.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param amount The amount to distribute.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param data Additional information related to the distribution proposal.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function submitProposal(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 proposalId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address unitHolderAddr,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        int256 amount,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes calldata data</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) external</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="processproposal"></a>processProposal<a class="hash-link" href="#processproposal" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Process the distribution proposal, calculates the fair amount of funds to distribute to the members based on the units holdings.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev A distribution proposal must be in progress.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only one proposal per DAO can be executed at time.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only active members can receive funds.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only proposals that passed the voting can be set to In Progress status.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dao The dao address.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param proposalId The distribution proposal id.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function processProposal(DaoRegistry dao, bytes32 proposalId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        external</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distribute"></a>distribute<a class="hash-link" href="#distribute" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">     /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Transfers the funds from the Guild account to the member&#x27;s internal accounts.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice The amount of funds is caculated using the historical number of units of each member.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev A distribution proposal must be in progress.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only proposals that have passed the voting can be completed.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev Only active members can receive funds.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param dao The dao address.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param toIndex The index to control the cached for-loop.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function distribute(DaoRegistry dao, uint256 toIndex) external override</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_submitproposal"></a>_submitProposal<a class="hash-link" href="#_submitproposal" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Creates the proposal, starts the voting process and sponsors the proposal.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @dev If the unit holder address was provided in the params, the unit holder must have enough units to receive the funds.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _submitProposal(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 proposalId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address unitHolderAddr,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 amount,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes calldata data,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address submittedBy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) internal onlyMember2(dao, submittedBy)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_distributeone"></a>_distributeOne<a class="hash-link" href="#_distributeone" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Updates the holder account with the amount based on the token parameter.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice It is an internal transfer only that happens in the Bank extension.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _distributeOne(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        BankExtension bank,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address unitHolderAddr,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 blockNumber,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 amount</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) internal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_distributeall"></a>_distributeAll<a class="hash-link" href="#_distributeall" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Updates all the holder accounts with the amount based on the token parameter.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice It is an internal transfer only that happens in the Bank extension.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _distributeAll(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        BankExtension bank,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 currentIndex,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 maxIndex,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 blockNumber,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 amount</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) internal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="distributed"></a>Distributed<a class="hash-link" href="#distributed" title="Direct link to heading">#</a></h3><p>When the distribution process is completed the <code>Distributed</code> event is emitted with the <code>token</code>, <code>amount</code>, and <code>unitHolder</code> parameters. If the <code>unitHolder</code> is <code>0x0</code>, the amount was distributed to <strong>all</strong> members of the DAO, otherwise it was distributed to the unit holder only.</p><ul><li><code>event Distributed(address token, uint256 amount, address unitHolder);</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openlawteam/tribute-contracts/edit/docs/website/docs/contracts/adapters/distribution/Distribute.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/contracts/adapters/configuration/managing-adapter"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Managing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/contracts/adapters/funding/financing-adapter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Financing »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workflow" class="table-of-contents__link">Workflow</a></li><li><a href="#access-flags" class="table-of-contents__link">Access Flags</a><ul><li><a href="#daoregistry" class="table-of-contents__link">DAORegistry</a></li><li><a href="#bankextension" class="table-of-contents__link">BankExtension</a></li></ul></li><li><a href="#dependencies" class="table-of-contents__link">Dependencies</a><ul><li><a href="#daoregistry-1" class="table-of-contents__link">DaoRegistry</a></li><li><a href="#bank" class="table-of-contents__link">Bank</a></li><li><a href="#voting" class="table-of-contents__link">Voting</a></li><li><a href="#fairsharehelper" class="table-of-contents__link">FairShareHelper</a></li></ul></li><li><a href="#structs" class="table-of-contents__link">Structs</a><ul><li><a href="#distribution" class="table-of-contents__link">Distribution</a></li><li><a href="#distributionstatus" class="table-of-contents__link">DistributionStatus</a></li></ul></li><li><a href="#storage" class="table-of-contents__link">Storage</a><ul><li><a href="#distributions" class="table-of-contents__link">distributions</a></li><li><a href="#ongoingdistributions" class="table-of-contents__link">ongoingDistributions</a></li></ul></li><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#receive" class="table-of-contents__link">receive</a></li><li><a href="#submitproposal" class="table-of-contents__link">submitProposal</a></li><li><a href="#processproposal" class="table-of-contents__link">processProposal</a></li><li><a href="#distribute" class="table-of-contents__link">distribute</a></li><li><a href="#_submitproposal" class="table-of-contents__link">_submitProposal</a></li><li><a href="#_distributeone" class="table-of-contents__link">_distributeOne</a></li><li><a href="#_distributeall" class="table-of-contents__link">_distributeAll</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#distributed" class="table-of-contents__link">Distributed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><p>&copy; TributeDAO Framework.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.934fcd05.js"></script>
<script src="/assets/js/main.82287f4f.js"></script>
</body>
</html>