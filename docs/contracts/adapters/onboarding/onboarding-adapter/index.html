<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="TributeDAO Framework" href="/opensearch.xml"><title data-react-helmet="true">ERC20/ETH | TributeDAO Framework</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tributedao.com/docs/contracts/adapters/onboarding/onboarding-adapter"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ERC20/ETH | TributeDAO Framework"><meta data-react-helmet="true" name="description" content="The Onboarding adapter allows potential and existing DAO members to contribute Ether or ERC-20 tokens to the DAO in exchange for a fixed amount of internal tokens (e.g., UNITS or LOOT tokens already registered with the DAO Bank) based on the amount of assets contributed. If the proposal passes, the internal tokens are minted to the applicant (which effectively makes the applicant a member of the DAO if not already one) and the tokens provided as tribute are transferred to the Bank extension."><meta data-react-helmet="true" property="og:description" content="The Onboarding adapter allows potential and existing DAO members to contribute Ether or ERC-20 tokens to the DAO in exchange for a fixed amount of internal tokens (e.g., UNITS or LOOT tokens already registered with the DAO Bank) based on the amount of assets contributed. If the proposal passes, the internal tokens are minted to the applicant (which effectively makes the applicant a member of the DAO if not already one) and the tokens provided as tribute are transferred to the Bank extension."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tributedao.com/docs/contracts/adapters/onboarding/onboarding-adapter"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/adapters/onboarding/onboarding-adapter" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/adapters/onboarding/onboarding-adapter" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://JM91LTL6DB-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b4c018f9.css">
<link rel="preload" href="/assets/js/runtime~main.5d7192e7.js" as="script">
<link rel="preload" href="/assets/js/main.cee2ec44.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">TRIBUTE</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/overview-and-benefits">Get Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/core/introduction">Core</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/extensions/introduction">Extensions</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/adapters/introduction">Adapters</a><a class="navbar__item navbar__link" href="/docs/thanks">Thank You</a><a href="https://discord.gg/tEfP68xnTd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Tribute Discord"></a><a href="https://github.com/search?q=org%3Aopenlawteam+tribute-ui+OR+tribute-contracts+in%3Aname&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Tribute GitHub"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/overview-and-benefits">Overview &amp; Benefits</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Comparison</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Design Principles</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/core/dao-registry">Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/core/dao-factory">Factory</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extension</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Adapter</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Distribution</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Funding</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Kick</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Onboarding</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/adapters/onboarding/coupon-onboarding-adapter">Coupon</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/contracts/adapters/onboarding/onboarding-adapter">ERC20/ETH</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/adapters/onboarding/tribute-adapter">ERC20 Tribute</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/adapters/onboarding/tribute-nft-adapter">ERC721/1155 Tribute</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/adapters/onboarding/lend-nft-adapter">ERC721/1155 Lending / Staking</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/adapters/onboarding/kyc-onboarding-adapter">KYC ERC20/ETH</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Voting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Utils</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/tutorial/dao/interacting">Tribute UI</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Subgraph</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ERC20/ETH</h1></header><p>The Onboarding adapter allows potential and existing DAO members to contribute Ether or ERC-20 tokens to the DAO in exchange for a fixed amount of internal tokens (e.g., UNITS or LOOT tokens already registered with the DAO Bank) based on the amount of assets contributed. If the proposal passes, the internal tokens are minted to the applicant (which effectively makes the applicant a member of the DAO if not already one) and the tokens provided as tribute are transferred to the Bank extension.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You can mint any internal tokens but it is usually to mint either UNITS or LOOT tokens. The onboarding process supports raw Ether and ERC-20 tokens as tribute. The ERC-20 token must be allowed/supported by the Bank.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="workflow"></a>Workflow<a class="hash-link" href="#workflow" title="Direct link to heading">#</a></h2><p>An onboarding proposal is made by a member first submitting a proposal specifying (1) the applicant who wishes to join the DAO (or increase his stake in the DAO), (2) the type of internal tokens the applicant desires (e.g., member UNITS), and (3) the amount of Ether or ERC-20 tokens that will transfer to the DAO in exchange for those internal tokens. The applicant and actual owner of the ERC-20 tokens can be separate accounts (e.g., the token owner is providing tribute on behalf of the applicant). The internal token type requested must be already registered with the DAO Bank and will usually be pre-defined UNITS or LOOT tokens in the DAO. The proposal submission does not actually transfer the Ether or ERC-20 tokens from its owner. That occurs only after the proposal passes and is processed.</p><p>The proposal is also sponsored in the same transaction when it is submitted. When a DAO member sponsors the proposal, the voting period begins allowing members to vote for or against the proposal. Only a member can sponsor the proposal.</p><p>After the voting period is done along with its subsequent grace period, the proposal can be processed. Any account can process a failed proposal. However, only the original proposer (owner of the assets being transferred to the DAO) can process a passed proposal. Prior to processing a passed proposal involving ERC-20 tribute tokens, the owner of those tokens must first separately <code>approve</code> the Onboarding adapter as spender of the tokens provided as tribute. Upon processing, if the vote has passed, the internal tokens are minted to the applicant (which effectively makes the applicant a member of the DAO if not already one). The amount of Ether or ERC-20 tokens provided as tribute are added to the Guild balance and transferred from the token owner to the Bank extension.</p><p>Upon processing, if the vote has failed (i.e., more NO votes then YES votes or a tie), no further action is taken (the owner of the Ether or ERC-20 tokens still retains ownership of the assets).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="access-flags"></a>Access Flags<a class="hash-link" href="#access-flags" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="daoregistry"></a>DaoRegistry<a class="hash-link" href="#daoregistry" title="Direct link to heading">#</a></h3><ul><li><code>SUBMIT_PROPOSAL</code></li><li><code>UPDATE_DELEGATE_KEY</code></li><li><code>NEW_MEMBER</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bankextension"></a>BankExtension<a class="hash-link" href="#bankextension" title="Direct link to heading">#</a></h3><ul><li><code>ADD_TO_BALANCE</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dependencies"></a>Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="daoregistry-1"></a>DaoRegistry<a class="hash-link" href="#daoregistry-1" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bankextension-1"></a>BankExtension<a class="hash-link" href="#bankextension-1" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="voting"></a>Voting<a class="hash-link" href="#voting" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ierc20"></a>IERC20<a class="hash-link" href="#ierc20" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="potentialnewmember"></a>PotentialNewMember<a class="hash-link" href="#potentialnewmember" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="erc20"></a>ERC20<a class="hash-link" href="#erc20" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="structs"></a>Structs<a class="hash-link" href="#structs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proposaldetails"></a>ProposalDetails<a class="hash-link" href="#proposaldetails" title="Direct link to heading">#</a></h3><ul><li><code>id</code>: The proposalId (provided offchain).</li><li><code>unitsToMint</code>: Which token needs to be minted if the proposal passes.</li><li><code>amount</code>: The amount sent by the proposer.</li><li><code>unitsRequested</code>: The amount of internal tokens that needs to be minted to the applicant if the proposal passes.</li><li><code>token</code>: What currency has been used in the onboarding process. We keep this information even though it is part of the configuration to handle the case where the configuration changes while a proposal has been created but not processed yet.</li><li><code>applicant</code>: The applicant address.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="onboardingdetails"></a>OnboardingDetails<a class="hash-link" href="#onboardingdetails" title="Direct link to heading">#</a></h3><ul><li><code>chunkSize</code>: How many tokens need to be minted per chunk bought.</li><li><code>unitsPerChunk</code>: How many units (tokens from tokenAddr) are being minted per chunk.</li><li><code>tokenAddr</code>: In which currency (tokenAddr) should the onboarding take place.</li><li><code>maximumChunks</code>: How many chunks can someone buy max. This helps force decentralization of token holders.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proposals"></a>proposals<a class="hash-link" href="#proposals" title="Direct link to heading">#</a></h3><p>The proposals are organized by DAO address and then by proposal id.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="units"></a>units<a class="hash-link" href="#units" title="Direct link to heading">#</a></h3><p>Accounting to see the amount of a particular internal token that has been minted for a particular applicant. This is then checked against the maxChunks configuration to determine if the onboarding proposal is allowed or not.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configuredao"></a>configureDao<a class="hash-link" href="#configuredao" title="Direct link to heading">#</a></h3><p>Configures the adapter for a particular DAO. The modifier is adapterOnly which means that only if the sender is either a registered adapter of the DAO or if it is in creation mode can it be called. The function checks that chunkSize, unitsPerChunks and maximumChunks cannot be 0.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Updates the DAO registry with the new configurations if valid.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Updated the Bank extension with the new potential tokens if valid.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param unitsToMint Which token needs to be minted if the proposal passes, it is whitelisted in the Bank.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param chunkSize How many tokens need to be minted per chunk bought.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param unitsPerChunk How many units (tokens from tokenAddr) are being minted per chunk.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param maximumChunks How many chunks can someone buy max. This helps force decentralization of token holders.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param tokenAddr In which currency (tokenAddr) should the onboarding take place.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function configureDao(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address unitsToMint,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 chunkSize,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 unitsPerChunk,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 maximumChunks,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address tokenAddr</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) external onlyAdapter(dao)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="submitproposal"></a>submitProposal<a class="hash-link" href="#submitproposal" title="Direct link to heading">#</a></h3><p>Submits and sponsors the proposal. Only members can call this function.</p><p>Uses <strong>_submitMembershipProposal</strong> to create the proposal.</p><p>Uses <strong>_sponsorProposal</strong> to sponsor the proposal.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Submits and sponsors the proposal. Only members can call this function.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param proposalId The proposal id to submit to the DAO Registry.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param applicant The applicant address.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param tokenToMint The token to be minted if the proposal pass.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param tokenAmount The amount of token to mint.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param data Additional proposal information.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function submitProposal(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 proposalId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address payable applicant,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address tokenToMint,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 tokenAmount,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes memory data</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) public override reentrancyGuard(dao)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="processproposal"></a>processProposal<a class="hash-link" href="#processproposal" title="Direct link to heading">#</a></h3><p>Once the vote on a proposal is finished, it is time to process it. Anybody can call this function.</p><p>The function checks that there is a vote in progress for this proposalId and that it has not been processed yet.
If the vote is a success (<code>PASS</code>), then we process it by minting the internal tokens and moving the tokens from the adapter to the bank extension.</p><p>If the vote is a tie (<code>TIE</code>) or failed (<code>NOT_PASS</code>), then the funds are returned to the proposer.</p><p>Otherwise, the state is invalid and the transaction is reverted (if the vote does not exist or if it is in progress).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Once the vote on a proposal is finished, it is time to process it. Anybody can call this function.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param proposalId The proposal id to be processed. It needs to exist in the DAO Registry.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function processProposal(DaoRegistry dao, bytes32 proposalId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        external</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        payable</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        override</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        reentrancyGuard(dao)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_sponsorproposal"></a>_sponsorProposal<a class="hash-link" href="#_sponsorproposal" title="Direct link to heading">#</a></h3><p>Starts a vote on the proposal to onboard a new member.</p><p><strong>dao.sponsorProposal(proposalId, sponsoredBy, address(votingContract))</strong> checks already that the proposal has not been sponsored yet</p><p><strong>voting.startNewVotingForProposal(dao, proposalId, data)</strong> starts the vote process</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_submitmembershipproposal"></a>_submitMembershipProposal<a class="hash-link" href="#_submitmembershipproposal" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Marks the proposalId as submitted in the DAO and saves the information in the internal adapter state.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Updates the total of units issued in the DAO, and checks if it is within the limits.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _submitMembershipProposal(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DaoRegistry dao,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bytes32 proposalId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address tokenToMint,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address payable applicant,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uint256 value,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) internal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_getunits"></a>_getUnits<a class="hash-link" href="#_getunits" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Gets the current number of units.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param daoAddress The DAO Address that contains the units.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param token The Token Address in which the Unit were minted.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param applicant The Applicant Address which holds the units.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     function _getUnits(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address daoAddress,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address token,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        address applicant</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) internal view</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_configkey"></a>_configKey<a class="hash-link" href="#_configkey" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @notice Builds the configuration key by encoding an address with a string key.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param tokenAddrToMint The address to encode.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param key The key to encode.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function _configKey(address tokenAddrToMint, bytes32 key)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        internal</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        pure</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h3><p>No events are emitted.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openlawteam/tribute-contracts/edit/docs/website/docs/contracts/adapters/onboarding/Onboarding.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/contracts/adapters/onboarding/coupon-onboarding-adapter"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Coupon</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/contracts/adapters/onboarding/tribute-adapter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ERC20 Tribute »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workflow" class="table-of-contents__link">Workflow</a></li><li><a href="#access-flags" class="table-of-contents__link">Access Flags</a><ul><li><a href="#daoregistry" class="table-of-contents__link">DaoRegistry</a></li><li><a href="#bankextension" class="table-of-contents__link">BankExtension</a></li></ul></li><li><a href="#dependencies" class="table-of-contents__link">Dependencies</a><ul><li><a href="#daoregistry-1" class="table-of-contents__link">DaoRegistry</a></li><li><a href="#bankextension-1" class="table-of-contents__link">BankExtension</a></li><li><a href="#voting" class="table-of-contents__link">Voting</a></li><li><a href="#ierc20" class="table-of-contents__link">IERC20</a></li><li><a href="#potentialnewmember" class="table-of-contents__link">PotentialNewMember</a></li><li><a href="#erc20" class="table-of-contents__link">ERC20</a></li></ul></li><li><a href="#structs" class="table-of-contents__link">Structs</a><ul><li><a href="#proposaldetails" class="table-of-contents__link">ProposalDetails</a></li><li><a href="#onboardingdetails" class="table-of-contents__link">OnboardingDetails</a></li></ul></li><li><a href="#storage" class="table-of-contents__link">Storage</a><ul><li><a href="#proposals" class="table-of-contents__link">proposals</a></li><li><a href="#units" class="table-of-contents__link">units</a></li></ul></li><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#configuredao" class="table-of-contents__link">configureDao</a></li><li><a href="#submitproposal" class="table-of-contents__link">submitProposal</a></li><li><a href="#processproposal" class="table-of-contents__link">processProposal</a></li><li><a href="#_sponsorproposal" class="table-of-contents__link">_sponsorProposal</a></li><li><a href="#_submitmembershipproposal" class="table-of-contents__link">_submitMembershipProposal</a></li><li><a href="#_getunits" class="table-of-contents__link">_getUnits</a></li><li><a href="#_configkey" class="table-of-contents__link">_configKey</a></li><li><a href="#events" class="table-of-contents__link">Events</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><p>&copy; TributeDAO Framework.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d7192e7.js"></script>
<script src="/assets/js/main.cee2ec44.js"></script>
</body>
</html>